<section *ngIf="task.id">
  <div
    class="content"
    draggable="true"
    (dragstart)="dragDropService.startDragging($event, task.id)"
  >
    <div
      class="category"
      [style.background-color]="categoryColors.get(task.category)"
    >
      {{ task.category }}
    </div>
    <div class="headline">{{ task.title }}</div>
    <div class="description">
      {{ task.description }}
    </div>
    @if(task.subtasksTitle.length > 0) {
    <div class="subtask">
      <div class="subtask-line">
        <span
          class="filler-full"
          [style.width.%]="completedSubtasksPercent()"
        ></span>
      </div>
      <div class="subtask-text">
        {{ completedSubtasks() }} / {{ task.subtasksTitle.length }} Subtasks
      </div>
    </div>
    }
    <div class="footer">
      <div class="footer-badge">
        @if (task.assigned) { @for (assigned of task.assigned; track assigned) {
        <span class="footer-badged">{{ assigned }}</span>
        } }
      </div>
      <div class="footer-priority prio-{{ task.priority }}"></div>
    </div>
  </div>
</section>
